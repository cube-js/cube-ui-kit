import { Meta } from '@storybook/blocks';

<Meta title="tasty/Documentation" />

# Tasty Style Helper

`tasty` is a powerful utility for creating styled React components with a declarative, design-system-integrated API. It combines the flexibility of CSS-in-JS with the consistency of a design system, enabling you to build maintainable, themeable components quickly.

---

## üöÄ Quick Start

### Creating Your First Component

```jsx
import { tasty } from '@cube-dev/ui-kit';

// Basic styled component
const Card = tasty({
  as: 'div',
  styles: {
    padding: '4x',
    fill: '#white',
    border: true,
    radius: true,
  },
});

// Usage
<Card>Hello World</Card>
```

### Extending Existing Components

> **‚úÖ Best Practice:** Always prefer creating styled wrappers over using the `styles` prop directly.

```jsx
// ‚úÖ Recommended
const PrimaryButton = tasty(Button, {
  styles: {
    fill: '#purple',
    color: '#white',
    padding: '2x 4x',
  },
});

// ‚ùå Avoid
<Button styles={{ fill: '#purple' }}>Click me</Button>
```

### Essential Patterns

```jsx
// Responsive styling
const ResponsiveBox = tasty({
  styles: {
    padding: ['4x', '2x', '1x'], // Large ‚Üí Medium ‚Üí Small screens
  },
});

// State-based styling
const InteractiveCard = tasty({
  styles: {
    fill: {
      '': '#white',
      'hovered': '#gray.05',
      'pressed': '#gray.10',
    },
  },
});

// Using design tokens
const TokenCard = tasty({
  styles: {
    fill: '#surface',      // Color token
    color: '#text',        // Color token
    padding: '2x',         // Custom unit (gap √ó 2)
    radius: '1r',          // Custom unit (border-radius)
    border: '1bw solid #border', // Border width token
  },
});
```

---

## üéØ Core Concepts

### Component Creation

Use `tasty()` to create styled components with three main approaches:

```jsx
// 1. Create new element
const Box = tasty({
  as: 'div',
  styles: { /* styles */ },
});

// 2. Extend existing component
const StyledButton = tasty(Button, {
  styles: { /* additional styles */ },
});

// 3. Global selector styling
const GlobalHeading = tasty('.heading', {
  preset: 'h2',
  color: '#primary',
});
```

### Style System Overview

Tasty enhances CSS with:
- **Design tokens** - `#purple`, `#text`, `#border`
- **Custom units** - `2x` (gap), `1r` (radius), `1bw` (border-width)
- **Responsive arrays** - `['4x', '2x', '1x']`
- **State objects** - `{ '': 'default', hovered: 'hover-state' }`
- **Smart defaults** - `border: true` uses design system values

### Color Tokens & Opacity

```jsx
// Color tokens with opacity
color: '#purple',      // Full opacity
color: '#purple.5',    // 50% opacity
color: '#purple.05',   // 5% opacity

// RGB values (no commas!)
'@custom-color': 'rgb(255 128 0)',
```

### Custom Units Reference

| Unit | Description | Example | CSS Output |
|------|-------------|---------|------------|
| `x` | Gap multiplier | `2x` | `calc(var(--gap) * 2)` |
| `r` | Border radius | `1r` | `var(--radius)` |
| `bw` | Border width | `2bw` | `calc(var(--border-width) * 2)` |
| `ow` | Outline width | `1ow` | `var(--outline-width)` |
| `fs` | Font size | `1fs` | `var(--font-size)` |
| `lh` | Line height | `1lh` | `var(--line-height)` |

### Responsive Styling

Configure breakpoints and use responsive arrays:

```jsx
// Configure breakpoints (optional)
<BreakpointsProvider value={[1200, 640]}>
  <App />
</BreakpointsProvider>

// Use responsive arrays
<Block padding={["4x", "2x", "1x"]} />
// Large screens (‚â•1200px): 4x
// Medium screens (640px-1199px): 2x  
// Small screens (<640px): 1x
```

---

## üìñ Style Properties Reference

### Layout Properties

#### `display` & `hide`
```jsx
display: 'flex',     // Standard CSS values
display: 'grid',
hide: true,          // Shortcut for display: none
```

#### `flow` - Layout Direction
Unified control for flex and grid direction:
```jsx
// Flex containers
flow: 'row',         // flex-direction: row
flow: 'column wrap', // flex-flow: column wrap

// Grid containers  
flow: 'column',      // grid-auto-flow: column
flow: 'row dense',   // grid-auto-flow: row dense
```

#### `gap` - Element Spacing
Works across all layout types:
```jsx
gap: '2x',           // Standard gap
gap: '1x 2x',        // Row gap, column gap
gap: true,           // Default gap (1x)
```

#### `padding` & `margin` - Spacing
Enhanced syntax with directional modifiers:
```jsx
padding: '2x',                    // All sides
padding: '2x 1x',                 // Vertical, horizontal
padding: '2x top',                // Top only
padding: '1x left right',         // Left and right
padding: true,                    // Default spacing
```

#### `width` & `height` - Dimensions
```jsx
width: '10x',                     // Fixed width
width: '1x 10x',                  // min-width, max-width
width: '1x 5x 10x',               // min, value, max
width: 'min 2x',                  // min-width only
width: 'stretch',                 // Fill available space
```

### Visual Properties

#### `color` & `fill` - Colors
```jsx
color: '#text',                   // Text color token
fill: '#purple.10',               // Background with opacity
color: {
  '': '#dark',
  hovered: '#purple',
  '[disabled]': '#gray',
},
```

#### `border` - Borders
Enhanced border syntax with directional support:
```jsx
border: true,                     // Default border
border: '2bw solid #purple',      // Custom border
border: '1bw top',                // Top border only
border: 'dashed #danger left right', // Left/right borders
```

#### `radius` - Border Radius
Advanced radius with shapes and directions:
```jsx
radius: '2r',                     // Custom radius
radius: true,                     // Default radius
radius: 'round',                  // Fully rounded
radius: 'leaf',                   // Asymmetric shape
radius: '1r top',                 // Top corners only
```

### Typography Properties

#### `preset` - Typography Presets
Semantic typography shortcuts:
```jsx
preset: 'h1',                     // Heading 1
preset: 't2',                     // Text style 2
preset: 'p1',                     // Paragraph 1
preset: 'h2 strong',              // Bold heading 2

// Available presets:
// Headings: h1, h2, h3, h4, h5, h6
// Text: t1, t2, t2m, t3, t3m, t4, t4m  
// Paragraphs: p1, p2, p3, p4
// Main text: m1, m2, m3
// Captions: c1, c2, tag
```

### Advanced Properties

#### `transition` - Animations
Semantic transition names:
```jsx
transition: 'fill 0.2s',          // Background transitions
transition: 'fade 0.15s ease-in', // Opacity transitions  
transition: 'theme 0.3s',         // All theme properties
transition: 'border 0.2s, radius 0.3s', // Multiple properties
```

#### `scrollbar` - Scrollbar Styling
```jsx
scrollbar: true,                  // Thin, default color
scrollbar: 'thin 10px #purple.40 #dark.04', // Custom
scrollbar: 'none',                // Hidden
scrollbar: 'styled 12px #purple.40 #dark.04', // Modern style
```

#### `fade` - Edge Fading
Gradient masks for edge fading:
```jsx
fade: true,                       // All edges
fade: '2x left right',            // Left/right edges, 2x width
fade: '1x top',                   // Top edge only
```

---

## üîß Advanced Features

### Modifiers & State Binding

Modifiers create `data-is-*` attributes for state-based styling:

```jsx
const Button = tasty({
  styles: {
    fill: {
      '': '#blue',
      hovered: '#blue.8',          // Custom modifier
      pressed: '#blue.6',          // Custom modifier
      '[disabled]': '#gray',       // Built-in state
    },
  },
});

// Usage with mods
<Button mods={{ hovered: true, pressed: false }} disabled>
  Click me
</Button>
// Renders: <button data-is-hovered disabled>
```

### Complex State Logic

Use logical operators for complex state combinations:

```jsx
color: {
  '': '#default',
  '!disabled & hovered': '#blue',     // NOT disabled AND hovered
  'success | complete': '#green',     // success OR complete
  'warning ^ error': '#yellow',       // warning XOR error (exclusive)
  ':hover': '#purple',                // CSS pseudo-class
  '[data-theme="dark"]': '#light',    // Data attribute
}
```

#### Advanced Selector Examples

```jsx
// Using brackets for grouping complex logic
color: {
  '': '#default',
  '(hovered | focused) & !disabled': '#blue',    // Grouped: (hovered OR focused) AND NOT disabled
  '!(error | warning) & success': '#green',      // NOT (error OR warning) AND success
  '(pressed & !disabled) | selected': '#purple', // (pressed AND NOT disabled) OR selected
}

// Other supported selectors
fill: {
  '': '#surface',
  '.custom-class': '#highlight',           // CSS class selector
  '[data-variant="primary"]': '#primary',  // Data attribute with value
  '[data-loading]': '#gray',               // Data attribute (boolean)
  '[disabled]': '#disabled',               // Built-in HTML attribute
  '[aria-selected="true"]': '#selected',   // ARIA attribute
  ':focus-visible': '#focus',              // CSS pseudo-class
}

// Combining different selector types
border: {
  '': '1bw solid #border',
  'hovered & .interactive': '2bw solid #purple',     // Custom mod AND CSS class
  '[data-size="large"] & focused': '3bw solid #blue', // Data attribute AND custom mod
  '!disabled & (:hover | :focus)': '1bw solid #active', // NOT disabled AND (hover OR focus)
}
```

> **üí° Recommendations:**
> - **Prefer `mods` prop** for custom states: `<Component mods={{ hovered: true }}>`
> - **Prefer data attributes** for states with values: `<Component data-variant="primary">`
> - **Reserve CSS selectors** for built-in states and external styling needs
> - **Use brackets `()` for grouping** complex logical expressions

> **‚ö†Ô∏è Important:** Place more specific rules last - they're checked in reverse order.

### Sub-element Styling

Style inner elements using `data-element` attributes:

```jsx
const Card = tasty({
  styles: {
    padding: '4x',
    
    // Sub-element styles
    Title: {                      // Styles data-element="Title"
      preset: 'h3',
      color: '#primary',
    },
    Content: {                    // Styles data-element="Content"
      color: {
        '': '#text',
        '[data-variant="danger"]': '#danger',
      },
    },
  },
});

// Usage
<Card>
  <div data-element="Title">Card Title</div>
  <div data-element="Content">Card content</div>
</Card>
```

### Variants & Theming

Create themed component variations:

```jsx
const Button = tasty({
  styles: {
    padding: '2x 4x',
    border: true,
  },
  variants: {
    default: {
      fill: '#blue',
      color: '#white',
    },
    danger: {
      fill: '#red',
      color: '#white',
    },
    outline: {
      fill: 'transparent',
      color: '#blue',
      border: '1bw solid #blue',
    },
  },
});

// Usage
<Button variant="danger">Delete</Button>
<Button variant="outline">Cancel</Button>
```

### Custom Properties

Define and use custom CSS properties:

```jsx
const Component = tasty({
  styles: {
    // Define custom properties
    '@local-spacing': '2x',
    '@theme-color': 'rgb(255 128 0)',
    
    // Use custom properties
    padding: '@local-spacing',
    color: '@theme-color',
    margin: '@(custom-margin, 1x)', // With fallback
  },
});
```

---

## ‚úÖ Best Practices & Anti-patterns

### Do's ‚úÖ

```jsx
// ‚úÖ Use styled wrappers instead of styles prop
const StyledButton = tasty(Button, {
  styles: { fill: '#purple' }
});

// ‚úÖ Use design tokens and custom units
styles: {
  color: '#text',
  padding: '2x',
  radius: '1r',
}

// ‚úÖ Use semantic transition names
transition: 'theme 0.3s'

// ‚úÖ Use sub-element styling for inner elements
styles: {
  Title: { preset: 'h3' },
  Content: { color: '#text' },
}

// ‚úÖ Use responsive arrays for breakpoints
padding: ['4x', '2x', '1x']

// ‚úÖ Use modifiers for state-based styling
styles: {
  fill: {
    '': '#white',
    hovered: '#gray.05',
  },
}
```

### Don'ts ‚ùå

```jsx
// ‚ùå Don't use styles prop directly
<Button styles={{ fill: '#purple' }}>Click</Button>

// ‚ùå Don't use raw CSS values when tokens exist
styles: {
  color: '#333333',        // Use '#text' instead
  padding: '16px',         // Use '2x' instead
  border: '6px',     // Use '1r' instead
}

// ‚ùå Don't use CSS property names when Tasty alternatives exist
styles: {
  backgroundColor: '#blue', // Use 'fill' instead
  alignItems: 'center',     // Use 'align' instead
  justifyContent: 'center', // Use 'justify' instead
}

// ‚ùå Don't use custom selectors unnecessarily
styles: {
  '& > div': { margin: '1x' },     // Use sub-elements instead
  '&:hover': { color: '#blue' },   // Use modifiers instead
}

// ‚ùå Don't change styles prop at runtime (performance)
const [dynamicStyles, setDynamicStyles] = useState({});
<Component styles={dynamicStyles} /> // Use style prop for dynamic values

// ‚ùå Don't use simplified keys for built-in states
styles: {
  color: {
    disabled: '#gray',     // Use '[disabled]' instead
    checked: '#blue',      // Use '[checked]' instead
  },
}
```

### Performance Tips ‚ö°

```jsx
// ‚úÖ Use native style prop for dynamic values
<Component 
  style={{ '--custom-color': dynamicColor }}
  styles={{ color: '@custom-color' }}
/>

// ‚úÖ Avoid changing styles prop at runtime
// ‚ùå Don't do this:
<Component styles={isActive ? activeStyles : defaultStyles} />

// ‚úÖ Use modifiers instead:
<Component mods={{ active: isActive }} />

// ‚úÖ Use variants for theme switching instead of dynamic styles
<Component variant={isDark ? 'dark' : 'light'} />
```

### Common Patterns üé®

```jsx
// Interactive card with hover states
const InteractiveCard = tasty({
  styles: {
    padding: '4x',
    fill: {
      '': '#surface',
      hovered: '#surface-hover',
    },
    border: '1bw solid #border',
    radius: '2r',
    transition: 'fill 0.2s',
  },
});

// Responsive container
const Container = tasty({
  styles: {
    padding: ['6x', '4x', '2x'],
    maxWidth: ['1200px', '800px', '100%'],
    margin: '0 auto',
  },
});

// Button with variants
const Button = tasty({
  styles: {
    padding: '2x 4x',
    radius: '1r',
    border: 'none',
    preset: 't3',
    transition: 'fill 0.2s',
  },
  variants: {
    primary: { fill: '#primary', color: '#white' },
    secondary: { fill: '#secondary', color: '#text' },
    ghost: { fill: 'transparent', color: '#primary' },
  },
});
```

---

## üîó Cross-References

- **Getting Started**: See [Quick Start](#-quick-start) for basic usage patterns
- **Layout**: See [Layout Properties](#layout-properties) for `flow`, `gap`, `padding`, `margin`
- **Styling**: See [Visual Properties](#visual-properties) for `color`, `fill`, `border`, `radius`
- **Typography**: See [Typography Properties](#typography-properties) for `preset` and text styling
- **Interactivity**: See [Modifiers & State Binding](#modifiers--state-binding) for hover, focus, and custom states
- **Theming**: See [Variants & Theming](#variants--theming) for component variations
- **Performance**: See [Performance Tips](#performance-tips-) for optimization techniques
- **Create Component Guide**: See [CreateComponent.docs.mdx](/docs/tasty-createcomponent--docs) for component creation patterns

---

> **Need Help?** This documentation covers the most important `tasty` features. For additional examples and component creation patterns, see the [Component Creation Guide](/docs/tasty-createcomponent--docs).
